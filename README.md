(c) Decker, [http://www.decker.su](http://www.decker.su) 

###Дерево для сборки LineageOS 14 (x64) для Doogee X5 Max Pro

![LineageOS / Decker.SU](https://3.bp.blogspot.com/-beayt9o83QA/WKoDpc1PFoI/AAAAAAAAL-U/8NskvXvUNtI6ONDwmmB8jCojRD_XqGn6wCLcB/s1600/lineage_os_decker_su_478x269.jpg  "LineageOS / Decker.SU")

Дерево делал как Гарри Гудини "вслепую", т.к. этого аппарата у меня нет. Основной задачей было запустить сканер отпечатков пальцев, что успешно удалось благодаря героическим усилиям пользователей:

* [bolt1502](http://4pda.ru/forum/index.php?showuser=1305798) 
* [Kaco1324](http://4pda.ru/forum/index.php?showuser=1919474) 
* [bronislav808](http://4pda.ru/forum/index.php?showuser=5163709) 
* [kaito373](http://4pda.ru/forum/index.php?showuser=5083350) 
* [Antuanelli](http://4pda.ru/forum/index.php?showuser=2086138)  (ему спасибо за попытку, правда безуспешную, помочь с исходниками)

Которые тестировали все мои идеи в теме Разработка ядер и прошивок для [Doogee x5 Max Pro](http://4pda.ru/forum/index.php?showtopic=791223) и делились логами тестирования. На всю работу у нас ушло более двух суток ... 

###Что работает?

По идее должно работать все что указано в списке ниже:

* RIL (связь) на первой и второй SIM-карте.
* Передача данных через мобильную сеть.
* WiFi (устанавливается связь с точкой доступа, работает передача данных)
* **GPS** (полномасштабный тест не проводился, но в GPS Test'е, а также YGPS, который теперь встроен в прошивку местоположение определятся).
* Камера (основная и фронтальная камеры работают, в том числе работает и съемка видео.
* Аппаратные OMX кодеки (!), кодирование / декодирование видео осуществляется аппаратными кодеками.
* Светодиод вспышки.
* Звук
* Live Display (лучше сразу отключить во избежание "тормозов", тем неменее он работоспособен)
* Запись экрана (screen recording)
* Запись с микрофона (sound recording)
* Bluetooth (проверялась только передача / прием файлов между двумя аппаратами, работа с другими профилями, например, гарнитурой и т.п. не тестировалась)
* WiFi AP (создание точки доступа WiFi)
* Запись разговора с линии штатными средствами ОС
* Вибрация аппаратных клавиш BACK, HOME, MENU.
* **Датчик сканера отпечатка** пальца MicroArray (собственно это первая прошивка на Android 7.1.1 в которой удалось его запустить).
* Также работает **режим глубокого сна**, т.е. при неактивности процессор уходит в глубокий сон, что видно по результатам CPUSpy.
* FM Radio (починили Среда, 01. Март 2017 01:22)


Но возможны и какие-то нюансы ... 

###Не работает

* [Защитная плёнка](https://www.youtube.com/watch?v=aj5BTJha8Kg) ;))

Остальное вроде бы все вполне работоспособно. Но мелкие баги, естественно, не исключаются.

###Где скачать саму прошивку?

Текущие релизы прошивки выложены в разделе [Releases](https://github.com/DeckerSU/android_device_doogee_x5max_pro/releases)  на GitHub. Устанавливается стандартным образом через меню Install ZIP в TWRP.

###F.A.Q.

* *А как вы собрали дерево и прошивку, если у вас на руках нет этого аппарата?*
Здесь использовалась магия чистой воды, я же говорил что я Гарри Гудини ;) На самом деле всему этому предшествовала большая напряженная работа с другими девайсами, в совокупности на то чтобы заставить работать запись видео, GPS и т.п. на MT6735/37(M) ушло *около месяца* напряженной работы. Именно благодаря полученным знаниям и опыту удалось воплотить все это на на Dooge X5 Max Pro. Также, отдельное спасибо пользователям, перечисленным выше, которые тестировали каждую сборку и изменения на своих аппаратах в течении двух дней и предоставляли лог logcat'а. Без них магия бы не сработала.

* *А реально ли сделать что-то подобное для моего аппарата?*
Ввязываться в это после полученного опыта, т.е. собирать что-то "вслепую" повторно я уже не буду, урок я получил. Это отнимает массу времени и не стоит того. Для того чтобы сделать что-то подобное для другого устройства, как минимум желательно иметь его на руках. Все устройства на свете купить я естественно не могу, поэтому поддержка проекта в данном случае может оказать неплохую помощь. Она абсолютно добровольна, но при этом не гарантирует какой-либо обратной связи с моей стороны. Есть проекты которыми мне заниматься интересно, есть - которыми не очень. Для всего нужна мотивация ... прежде чем задать очередной вопрос подумайте - а вы бы смогли несколько месяцев потратить на то, чтобы построить кому-то дом, или помочь посадить картошку незнакомому человеку и т.п.?

* *А как сделать чтобы мой вопрос попал в этот FAQ?*
Для этого есть Issue на GitHub'е ... 

* *А почему нет системного root?*
На самом деле системный root я не делаю по одной простой причине, его можно включить в сборку, но тогда в ней появится бинарник su ... а при запуске любого клиент-банка, он скажет что ваша система имеет root или модифицирована, даже если он не включен и приложение либо не будет работать, либо будет работать с ограниченным функционалом. Поэтому root лучше  ставить отдельно. Тем более что zip с SuperSU прошить пара минут.

* *А какие GAPPS'ы прошивать и где их взять?*
Именно для прошивки собранной на этом дереве - идем на [http://opengapps.org/](http://opengapps.org/) и там выбираем **ARM64** -> **7.1** -> **pico**. Именно pico, если вы поставите stock версию она может "покорежить" звонилку.

###Благодарности

* Огромное спасибо [danielhk](https://github.com/danielhk)  за его код GPS HAL. Тем что здесь работает GPS все обязаны ему.
* [olegsvs](https://github.com/olegsvs) за фикс работы точки доступа, который я взял из одного из его деревьев. В частности ту часть которая касается фикса с IPv6.
* [xen0n](https://github.com/xen0n) за его работу над CM для MTK чипсетов и в особенности за эту ветку обсуждения [CM13.0 porting progress](https://github.com/xen0n/android_device_meizu_arale/issues/17).
* [ruslan_3_](http://4pda.ru/forum/index.php?showuser=1190843) - спасибо ему можете сказать скорее вы, за то что этот "нехороший человек" когда-то давно вообще заинтересовал меня сборкой Android из исходников )) 
* Моей жене, которая последние два дня подряд смотрела на то, как я приходил с работы и "утыкался в монитор", собирать прошивку для телефона, которого даже у меня нет ;)
* Команде разработчиков [LineageOS](https://github.com/LineageOS/).
* Всем остальным, которых я по причине глубокой усталости и нехватки времени забыл упомянуть здесь. Поверьте, я не со зла.

###Поддержка проекта

[http://donate.decker.su ](http://donate.decker.su ) 

Если вы используете материалы из этого дерева, портируете прошивку, распространяете ее любыми другими средствами (например, в виде zip-архива, в виде Backup'а сделанного в TWRP и т.п.) на других ресурсах - убедительная просьба указывать ссылку на первоисточник, которым в данном случае является [http://www.decker.su](http://www.decker.su) .